<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Scaling Elmish App</title>
    <meta name="description" content="How to Scale Elmish App">
    <meta name="author" content="Kunjan Dalal">
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <script src="//code.jquery.com/jquery-1.8.0.js"></script>
    <script src="//code.jquery.com/ui/1.8.23/jquery-ui.js"></script>
    <script src="//netdna.bootstrapcdn.com/twitter-bootstrap/2.2.1/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="//cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link href="//netdna.bootstrapcdn.com/twitter-bootstrap/2.2.1/css/bootstrap-combined.min.css" rel="stylesheet">
    <link rel="stylesheet" href="css/reveal.css">
    <link rel="stylesheet" href="css/theme/serif.css" id="theme">
    <link type="text/css" rel="stylesheet" href="fsharp.formatting/styles/style.css" />
    <link type="text/css" rel="stylesheet" href="fsharp.formatting/styles/deedle.css" />
    <link type="text/css" rel="stylesheet" href="css/custom.css" />
    <script src="fsharp.formatting/styles/tips.js" type="text/javascript"></script>
    <!-- For syntax highlighting -->
    <link rel="stylesheet" href="lib/css/zenburn.css">
    <link rel="stylesheet" href="css/fsreveal.css">
    <!-- If the query includes 'print-pdf', include the PDF print sheet -->
    <script>
			if( window.location.search.match( /print-pdf/gi ) ) {
				var link = document.createElement( 'link' );
				link.rel = 'stylesheet';
				link.type = 'text/css';
				link.href = 'css/print/pdf.css';
				document.getElementsByTagName( 'head' )[0].appendChild( link );
			}
    </script>
    <!--[if lt IE 9]>
    <script src="lib/js/html5shiv.js"></script>
    <![endif]-->
    <script language="javascript" type="text/javascript">
        function init()
        {
            websocket = new WebSocket("ws://"+window.location.host+"/websocket");
            websocket.onmessage = function(evt) { location.reload(); };
        }
        window.addEventListener("load", init, false);
    </script>
</head>
<body>
    <div class="reveal">
        <div class="tip" id="fs1">namespace Microsoft</div>
<div class="tip" id="fs2">namespace Microsoft.FSharp</div>
<div class="tip" id="fs3">namespace Microsoft.FSharp.Data</div>
<div class="tip" id="fs4">namespace Microsoft.FSharp.Data.UnitSystems</div>
<div class="tip" id="fs5">namespace Microsoft.FSharp.Data.UnitSystems.SI</div>
<div class="tip" id="fs6">namespace Microsoft.FSharp.Data.UnitSystems.SI.UnitNames</div>
<div class="tip" id="fs7">Multiple items<br />type MeasureAttribute =<br />&#160;&#160;inherit Attribute<br />&#160;&#160;new : unit -&gt; MeasureAttribute<br /><br />Full name: Microsoft.FSharp.Core.MeasureAttribute<br /><br />--------------------<br />new : unit -&gt; MeasureAttribute</div>
<div class="tip" id="fs8">val printfn : format:Printf.TextWriterFormat&lt;&#39;T&gt; -&gt; &#39;T<br /><br />Full name: Microsoft.FSharp.Core.ExtraTopLevelOperators.printfn</div>
<div class="tip" id="fs9">Multiple items<br />val string : value:&#39;T -&gt; string<br /><br />Full name: Microsoft.FSharp.Core.Operators.string<br /><br />--------------------<br />type string = System.String<br /><br />Full name: Microsoft.FSharp.Core.string</div>
<div class="tip" id="fs10">Multiple items<br />type ClassAttribute =<br />&#160;&#160;inherit Attribute<br />&#160;&#160;new : unit -&gt; ClassAttribute<br /><br />Full name: Microsoft.FSharp.Core.ClassAttribute<br /><br />--------------------<br />new : unit -&gt; ClassAttribute</div>
<div class="tip" id="fs11">type &#39;T option = Option&lt;&#39;T&gt;<br /><br />Full name: Microsoft.FSharp.Core.option&lt;_&gt;</div>
<div class="tip" id="fs12">type bool = System.Boolean<br /><br />Full name: Microsoft.FSharp.Core.bool</div>
<div class="tip" id="fs13">Multiple items<br />module Event<br /><br />from Microsoft.FSharp.Control<br /><br />--------------------<br />type Event&lt;&#39;T&gt; =<br />&#160;&#160;new : unit -&gt; Event&lt;&#39;T&gt;<br />&#160;&#160;member Trigger : arg:&#39;T -&gt; unit<br />&#160;&#160;member Publish : IEvent&lt;&#39;T&gt;<br /><br />Full name: Microsoft.FSharp.Control.Event&lt;_&gt;<br /><br />--------------------<br />type Event&lt;&#39;Delegate,&#39;Args (requires delegate and &#39;Delegate :&gt; Delegate)&gt; =<br />&#160;&#160;new : unit -&gt; Event&lt;&#39;Delegate,&#39;Args&gt;<br />&#160;&#160;member Trigger : sender:obj * args:&#39;Args -&gt; unit<br />&#160;&#160;member Publish : IEvent&lt;&#39;Delegate,&#39;Args&gt;<br /><br />Full name: Microsoft.FSharp.Control.Event&lt;_,_&gt;<br /><br />--------------------<br />new : unit -&gt; Event&lt;&#39;T&gt;<br /><br />--------------------<br />new : unit -&gt; Event&lt;&#39;Delegate,&#39;Args&gt;</div>
<div class="tip" id="fs14">val ignore : value:&#39;T -&gt; unit<br /><br />Full name: Microsoft.FSharp.Core.Operators.ignore</div>
<div class="tip" id="fs15">Multiple items<br />module List<br /><br />from Microsoft.FSharp.Collections<br /><br />--------------------<br />type List&lt;&#39;T&gt; =<br />&#160;&#160;| ( [] )<br />&#160;&#160;| ( :: ) of Head: &#39;T * Tail: &#39;T list<br />&#160;&#160;interface IReadOnlyCollection&lt;&#39;T&gt;<br />&#160;&#160;interface IEnumerable<br />&#160;&#160;interface IEnumerable&lt;&#39;T&gt;<br />&#160;&#160;member GetSlice : startIndex:int option * endIndex:int option -&gt; &#39;T list<br />&#160;&#160;member Head : &#39;T<br />&#160;&#160;member IsEmpty : bool<br />&#160;&#160;member Item : index:int -&gt; &#39;T with get<br />&#160;&#160;member Length : int<br />&#160;&#160;member Tail : &#39;T list<br />&#160;&#160;static member Cons : head:&#39;T * tail:&#39;T list -&gt; &#39;T list<br />&#160;&#160;static member Empty : &#39;T list<br /><br />Full name: Microsoft.FSharp.Collections.List&lt;_&gt;</div>
<div class="tip" id="fs16">namespace Microsoft.FSharp.Control</div>
<div class="tip" id="fs17">Multiple items<br />type DefaultValueAttribute =<br />&#160;&#160;inherit Attribute<br />&#160;&#160;new : unit -&gt; DefaultValueAttribute<br />&#160;&#160;new : check:bool -&gt; DefaultValueAttribute<br />&#160;&#160;member Check : bool<br /><br />Full name: Microsoft.FSharp.Core.DefaultValueAttribute<br /><br />--------------------<br />new : unit -&gt; DefaultValueAttribute<br />new : check:bool -&gt; DefaultValueAttribute</div>

        <!-- Any section element inside of this container is displayed as a slide -->
        <div class="slides">
            <section >
<h2>Scaling Fable Elmish / Elm Application</h2>
<h3>An Experience Report By</h3>
<br />
<h3>Kunjan Dalal</h3>
<h3>@kunjee</h3>
<br />
<aside class="notes">
Hello Hello. My self Kunjan Dalal, also known as Kunjee. I will be skipping other parts of the intro; because we are having some time issues.<br/>
</aside>
</section>
<section >
<h3>Agenda for Today</h3>
<ul>
<li><s>Intro to me</s></li>
<li><s>Intro to Elm</s></li>
<li>Intro to Fable &amp; Fable.Elmish</li>
<li><s>Basic Example</s></li>
<li>
<s>The Elm Architecture - TEA </s>
<!-- - Past - All the W question answered  -->
<!-- - Back End, Front End and more Front End -->
<!-- - The Model -->
<!-- - The View -->
<!-- - The Update -->
</li>
<li>Tips and Tricks for Scaling your Application</li>
<li>Why Elmish instead of Elm</li>
<li><s>External JS library in Fable Elmish </s></li>
<li><s>External React library in Fable Elmish </s></li>
<li><s>SAFE stack</s></li>
<li>Thank You!!!</li>
</ul>
<aside class="notes">
This talk was 45 mins long when I submitted. It has been cut down to 20 minutes due to other nice talks in the same area. So, I will also be cutting down a few things you might already know from other talks at this conference.<br/>
</aside>
</section>
<section >
<h3>Pop Quiz Time</h3>
<p><img src="images/riddler.gif" alt="" /></p>
<aside class="notes">
How many of you know about Elm?<br/>
How many are using Elm in a production application? A whole application or may be part of it?<br/>
Here is an important question. How many of you feel that the nice demo application is shown in the conference never get converted to the full-blown application?<br/>
</aside>
</section>
<section >
<section >
<s>
<h3>Demo</h3>
</s>
<aside class="notes">
We will not see any demo today.<br/>
Instead will talk about the past, more about what is possible in contrast to what can be possible.<br/>
</aside>
</section>
<section >
<h3>Why Code Samples will be  in F#?</h3>
<blockquote>
<p>It is a general-purpose functional programming language. It is a very much mainstream language. It works for web and mobile. It is very much strongly type language. It is F#.</p>
</blockquote>
<aside class="notes">
In this slides, all code samples will be in F#.<br/>
</aside>
</section>
</section>
<section >
<h3>Intro to Fable &amp; Fable Elmish</h3>
<blockquote>
<p>Fable is an F# to JavaScript compiler powered by Babel, designed to produce readable and standard code.</p>
</blockquote>
<p><br/></p>
<blockquote>
<p>Elmish implements core abstractions that can be used to build Fable applications following the “model view update” style of architecture, as made famous by Elm.</p>
</blockquote>
<aside class="notes">
There are two different things in Fable Elmish. Fable and Fable-Elmish or Elmish generally speaking. Let's have a look at both.<br/>
</aside>
</section>
<section >
<section >
<h3>Fable</h3>
<p><img src="images/fable_logo.png" alt="" /></p>
</section>
<section >
<h5>F# unit of Measure code</h5>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l"> 1: </span>
<span class="l"> 2: </span>
<span class="l"> 3: </span>
<span class="l"> 4: </span>
<span class="l"> 5: </span>
<span class="l"> 6: </span>
<span class="l"> 7: </span>
<span class="l"> 8: </span>
<span class="l"> 9: </span>
<span class="l">10: </span>
<span class="l">11: </span>
<span class="l">12: </span>
<span class="l">13: </span>
<span class="l">14: </span>
<span class="l">15: </span>
<span class="l">16: </span>
<span class="l">17: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp">    <span class="k">module</span> <span class="i">Tour</span><span class="o">.</span><span class="i">UnitsOfMeasure</span>

    <span class="c">// From https://docs.microsoft.com/en-us/dotnet/fsharp/tour</span>
    <span class="k">open</span> <span onmouseout="hideTip(event, 'fs1', 1)" onmouseover="showTip(event, 'fs1', 1)" class="i">Microsoft</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs2', 2)" onmouseover="showTip(event, 'fs2', 2)" class="i">FSharp</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs3', 3)" onmouseover="showTip(event, 'fs3', 3)" class="i">Data</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs4', 4)" onmouseover="showTip(event, 'fs4', 4)" class="i">UnitSystems</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs5', 5)" onmouseover="showTip(event, 'fs5', 5)" class="i">SI</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs6', 6)" onmouseover="showTip(event, 'fs6', 6)" class="i">UnitNames</span>

    <span class="k">let</span> <span class="i">sampleValue1</span> <span class="o">=</span> <span class="n">1600.0</span><span class="o">&lt;</span><span class="i">meter</span><span class="o">&gt;</span>

    [&lt;<span onmouseout="hideTip(event, 'fs7', 7)" onmouseover="showTip(event, 'fs7', 7)" class="i">Measure</span>&gt;]
    <span class="k">type</span> <span class="i">mile</span> <span class="o">=</span>
        <span class="k">static</span> <span class="k">member</span> <span class="i">asMeter</span> <span class="o">=</span> <span class="n">1609.34</span><span class="o">&lt;</span><span class="i">meter</span><span class="o">/</span><span class="i">mile</span><span class="o">&gt;</span>

    <span class="k">let</span> <span class="i">sampleValue2</span> <span class="o">=</span> <span class="n">500.0</span><span class="o">&lt;</span><span class="i">mile</span><span class="o">&gt;</span>

    <span class="k">let</span> <span class="i">sampleValue3</span> <span class="o">=</span> <span class="i">sampleValue2</span> <span class="o">*</span> <span class="i">mile</span><span class="o">.</span><span class="i">asMeter</span>

    <span onmouseout="hideTip(event, 'fs8', 8)" onmouseover="showTip(event, 'fs8', 8)" class="i">printfn</span> <span class="s">&quot;After a %f race I would walk %f miles</span>
<span class="s">            which would be %f meters&quot;</span> <span class="i">sampleValue1</span> <span class="i">sampleValue2</span> <span class="i">sampleValue3</span>
</code></pre></td>
</tr>
</table>
<aside class="notes">
Here is a simple F# code with its specific Unit of Measure feature. A tight guard against how you define units. It is very helpful in the industry like Finance, Biology, Research etc.<br/>
</aside>
</section>
<section >
<h5>Converted Java Script Code</h5>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l"> 1: </span>
<span class="l"> 2: </span>
<span class="l"> 3: </span>
<span class="l"> 4: </span>
<span class="l"> 5: </span>
<span class="l"> 6: </span>
<span class="l"> 7: </span>
<span class="l"> 8: </span>
<span class="l"> 9: </span>
<span class="l">10: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="js">    import { toConsole, printf } from <span class="s">"fable-core/String"</span>;
    export <span class="k">const</span> sampleValue<span class="n">1</span> <span class="o">=</span> <span class="n">1600</span>;
    export <span class="k">function</span> mile$$$get_asMeter() {
    <span class="k">return</span> <span class="n">1609.34</span>;
    }
    export <span class="k">const</span> sampleValue<span class="n">2</span> <span class="o">=</span> <span class="n">500</span>;
    export <span class="k">const</span> sampleValue<span class="n">3</span> <span class="o">=</span> sampleValue<span class="n">2</span> <span class="o">*</span> mile$$$get_asMeter();
    toConsole(
        printf(<span class="s">"After a %f race I would walk %f miles which would be %f meters"</span>))
            (sampleValue<span class="n">1</span>)(sampleValue<span class="n">2</span>)(sampleValue<span class="n">3</span>);
</code></pre></td></tr></table>
<aside class="notes">
Have a look at this. A very readable JavaScript. Which then pass on to Bable to boil down to normal JavaScript which can be understood by the browser.<br/>
</aside>
</section>
</section>
<section >
<section >
<h3>Elmish</h3>
<p><img src="images/elmish.png" alt="" /></p>
</section>
<section >
<h5>Elmish - Types</h5>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
<span class="l">2: </span>
<span class="l">3: </span>
<span class="l">4: </span>
<span class="l">5: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp">    <span class="k">type</span> <span class="i">Model</span> <span class="o">=</span>
        { <span class="i">Value</span> <span class="o">:</span> <span onmouseout="hideTip(event, 'fs9', 9)" onmouseover="showTip(event, 'fs9', 9)" class="i">string</span> }

    <span class="k">type</span> <span class="i">Msg</span> <span class="o">=</span>
        | <span class="i">ChangeValue</span> <span class="k">of</span> <span onmouseout="hideTip(event, 'fs9', 10)" onmouseover="showTip(event, 'fs9', 10)" class="i">string</span>
</code></pre></td>
</tr>
</table>
<aside class="notes">
Your routine model with a single property of type String. To change that we need to pass the message of value string.<br/>
</aside>
</section>
<section >
<h5>Elmish - State</h5>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
<span class="l">2: </span>
<span class="l">3: </span>
<span class="l">4: </span>
<span class="l">5: </span>
<span class="l">6: </span>
<span class="l">7: </span>
<span class="l">8: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp">    <span class="k">let</span> <span class="i">init</span> () <span class="o">=</span> { <span class="i">Value</span> <span class="o">=</span> <span class="s">&quot;&quot;</span> }, <span class="i">Cmd</span><span class="o">.</span><span class="i">none</span>

    <span class="c">// UPDATE</span>

    <span class="k">let</span> <span class="i">update</span> (<span class="i">msg</span><span class="o">:</span><span class="i">Msg</span>) (<span class="i">model</span><span class="o">:</span><span class="i">Model</span>) <span class="o">=</span>
        <span class="k">match</span> <span class="i">msg</span> <span class="k">with</span>
        | <span class="i">ChangeValue</span> <span class="i">newValue</span> <span class="k">-&gt;</span>
            { <span class="i">Value</span> <span class="o">=</span> <span class="i">newValue</span> }, <span class="i">Cmd</span><span class="o">.</span><span class="i">none</span>
</code></pre></td>
</tr>
</table>
<aside class="notes">
Init is initializing with an empty value and then update will take care of every change happen in the application.<br/>
</aside>
</section>
<section >
<h5>Elmish - View</h5>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l"> 1: </span>
<span class="l"> 2: </span>
<span class="l"> 3: </span>
<span class="l"> 4: </span>
<span class="l"> 5: </span>
<span class="l"> 6: </span>
<span class="l"> 7: </span>
<span class="l"> 8: </span>
<span class="l"> 9: </span>
<span class="l">10: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp">    <span class="k">let</span> <span class="i">view</span> <span class="i">model</span> <span class="i">dispatch</span> <span class="o">=</span>
        <span class="i">div</span> [ <span onmouseout="hideTip(event, 'fs10', 11)" onmouseover="showTip(event, 'fs10', 11)" class="i">Class</span> <span class="s">&quot;main-container&quot;</span> ]
            [ <span class="i">input</span> [ <span onmouseout="hideTip(event, 'fs10', 12)" onmouseover="showTip(event, 'fs10', 12)" class="i">Class</span> <span class="s">&quot;input&quot;</span>
                    <span class="i">Value</span> <span class="i">model</span><span class="o">.</span><span class="i">Value</span>
                    <span class="i">OnChange</span> (<span class="k">fun</span> <span class="i">ev</span> <span class="k">-&gt;</span> <span class="i">ev</span><span class="o">.</span><span class="i">target</span><span class="o">?</span><span class="i">value</span> <span class="o">|&gt;</span>
                                <span onmouseout="hideTip(event, 'fs9', 13)" onmouseover="showTip(event, 'fs9', 13)" class="i">string</span> <span class="o">|&gt;</span> <span class="i">ChangeValue</span> <span class="o">|&gt;</span> <span class="i">dispatch</span>) ]
            <span class="i">span</span> [ ]
                [ <span class="i">str</span> <span class="s">&quot;Hello, &quot;</span>
                <span class="i">str</span> <span class="i">model</span><span class="o">.</span><span class="i">Value</span>
                <span class="i">str</span> <span class="s">&quot;!&quot;</span> ] ]
</code></pre></td>
</tr>
</table>
<aside class="notes">
Here is a simple view that takes the value and shows it to a user. Also, it can dispatch a message to update method.<br/>
</aside>
</section>
<section >
<h5>Elmish - Main</h5>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
<span class="l">2: </span>
<span class="l">3: </span>
<span class="l">4: </span>
<span class="l">5: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp">    <span class="c">// App</span>
    <span class="i">Program</span><span class="o">.</span><span class="i">mkProgram</span> <span class="i">init</span> <span class="i">update</span> <span class="i">view</span>
    <span class="o">|&gt;</span> <span class="i">Program</span><span class="o">.</span><span class="i">withConsoleTrace</span>
    <span class="o">|&gt;</span> <span class="i">Program</span><span class="o">.</span><span class="i">withReact</span> <span class="s">&quot;elmish-app&quot;</span>
    <span class="o">|&gt;</span> <span class="i">Program</span><span class="o">.</span><span class="i">run</span>
</code></pre></td>
</tr>
</table>
<aside class="notes">
And here is wire up a code. Not much different than your regular Elm code. It is following the elm architecture.<br/>
</aside>
<!-- ***
<h3>Back End - Front End - Back End - Front End - Back End</h3>
<p><img src="images/backfront.gif" alt="" /></p>
<aside class="notes">
I love back end and made a career out of it, and I strongly believe that front end is also required good architecture, Nowadays it is more required. So, today will be talking about that front end part. --><br/>
</aside>
</section>
</section>
<section >
<section >
<h3>What is SPA ?</h3>
<p><img src="images/Deathly_Hallows_Sign.svg" alt="" /></p>
<aside class="notes">
When they told us about Single Page Application, they promise us that you don't need to learn any other thing other than HTML, javascript, and CSS. They promise a triangle of power, but instead what we got?<br/>
</aside>
</section>
<section data-background-image="images/triangles.gif">
</section>
</section>
<section data-background-image="images/oldman.jpeg">
<aside class="notes">
 Today I will be providing tips and tricks for your Elm / Elmish application. I wish you will take the advice as it is. Just like we used to take advise of a wise old man. Respecting time nothing else.<br/>
</aside>
</section>
<section >
<section >
<h3>Model - View - Update</h3>
<aside class="notes">
In MVU architecture I feel that the model is the most important thing. It is a message between update and view, and whoever controls the message controls the narrative.<br/>
</aside>
</section>
<section data-background-image="images/news.gif">
<aside class="notes">
So, my tips and tricks will start from that only.<br/>
</aside>
</section>
</section>
<section >
<section >
<h3>Let's Talk about Model</h3>
</section>
<section >
<h3>Application &amp; Authentication</h3>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l"> 1: </span>
<span class="l"> 2: </span>
<span class="l"> 3: </span>
<span class="l"> 4: </span>
<span class="l"> 5: </span>
<span class="l"> 6: </span>
<span class="l"> 7: </span>
<span class="l"> 8: </span>
<span class="l"> 9: </span>
<span class="l">10: </span>
<span class="l">11: </span>
<span class="l">12: </span>
<span class="l">13: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="k">type</span> <span class="i">Msg</span> <span class="o">=</span>
    | <span class="i">ApplicationMsg</span> <span class="k">of</span> <span class="i">Application</span><span class="o">.</span><span class="i">Types</span><span class="o">.</span><span class="i">Msg</span>
    | <span class="i">AuthenticationMsg</span> <span class="k">of</span> <span class="i">Authentication</span><span class="o">.</span><span class="i">Types</span><span class="o">.</span><span class="i">Msg</span>

<span class="k">type</span> <span class="i">PageModel</span> <span class="o">=</span>
    | <span class="i">ApplicationModel</span> <span class="k">of</span> <span class="i">Application</span><span class="o">.</span><span class="i">Types</span><span class="o">.</span><span class="i">Model</span>
    | <span class="i">AuthenticationModel</span> <span class="k">of</span> <span class="i">Authentication</span><span class="o">.</span><span class="i">Types</span><span class="o">.</span><span class="i">Model</span>

<span class="k">type</span> <span class="i">Model</span> <span class="o">=</span> {
    <span class="i">UserToken</span> <span class="o">:</span> <span class="i">AuthToken</span> <span onmouseout="hideTip(event, 'fs11', 14)" onmouseover="showTip(event, 'fs11', 14)" class="i">option</span>
    <span class="i">CurrentPage</span> <span class="o">:</span> <span class="i">Page</span>
    <span class="i">PageModel</span> <span class="o">:</span> <span class="i">PageModel</span>
}
</code></pre></td>
</tr>
</table>
</section>
<section >
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l"> 1: </span>
<span class="l"> 2: </span>
<span class="l"> 3: </span>
<span class="l"> 4: </span>
<span class="l"> 5: </span>
<span class="l"> 6: </span>
<span class="l"> 7: </span>
<span class="l"> 8: </span>
<span class="l"> 9: </span>
<span class="l">10: </span>
<span class="l">11: </span>
<span class="l">12: </span>
<span class="l">13: </span>
<span class="l">14: </span>
<span class="l">15: </span>
<span class="l">16: </span>
<span class="l">17: </span>
<span class="l">18: </span>
<span class="l">19: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="k">match</span> <span class="i">page</span> <span class="k">with</span>
| <span class="i">AuthenticationPage</span> <span class="i">a</span> <span class="k">-&gt;</span>
    <span class="k">let</span> (<span class="i">authentication</span>, <span class="i">authenticationCmd</span>) <span class="o">=</span>
        <span class="i">Authentication</span><span class="o">.</span><span class="i">State</span><span class="o">.</span><span class="i">init</span>(<span class="i">a</span>)
    <span class="k">in</span>
    {<span class="i">model</span> <span class="k">with</span> <span class="i">CurrentPage</span> <span class="o">=</span> <span class="i">AuthenticationPage</span> <span class="i">a</span>;
        <span class="i">PageModel</span> <span class="o">=</span> <span class="i">AuthenticationModel</span> <span class="i">authentication</span>},
            <span class="i">Cmd</span><span class="o">.</span><span class="i">map</span> <span class="i">AuthenticationMsg</span> <span class="i">authenticationCmd</span>

| <span class="i">ApplicationPage</span> <span class="i">a</span> <span class="k">-&gt;</span>
    <span class="k">if</span> <span class="i">model</span><span class="o">.</span><span class="i">UserToken</span><span class="o">.</span><span class="i">IsNone</span>
    <span class="k">then</span> <span class="i">model</span>, <span class="i">Navigation</span><span class="o">.</span><span class="i">modifyUrl</span>(<span class="i">toHash</span> (<span class="i">AuthenticationPage</span> <span class="i">Login</span>))
    <span class="k">else</span>
    <span class="k">let</span> (<span class="i">application</span>, <span class="i">applicationCmd</span>) <span class="o">=</span>
        <span class="i">Application</span><span class="o">.</span><span class="i">State</span><span class="o">.</span><span class="i">init</span>(<span class="i">a</span>,<span class="i">model</span><span class="o">.</span><span class="i">UserToken</span><span class="o">.</span><span class="i">Value</span>)
    <span class="k">in</span>
    {<span class="i">model</span> <span class="k">with</span> <span class="i">CurrentPage</span> <span class="o">=</span> <span class="i">ApplicationPage</span> <span class="i">a</span>;
        <span class="i">PageModel</span> <span class="o">=</span> <span class="i">ApplicationModel</span> <span class="i">application</span>},
            <span class="i">Cmd</span><span class="o">.</span><span class="i">map</span> <span class="i">ApplicationMsg</span> <span class="i">applicationCmd</span>
</code></pre></td>
</tr>
</table>
<aside class="notes">
An Authenticated user can access the application module and all users can access the Authenticate module. If you are starting your application and you are having user authentication in your application then you surely like to do this. If you are having 2 - 3 pages where a user needs to be authenticated then it is ok but not more than that; you seriously like to save your self from repeated user verification code.<br/>
Pro tip - Use JWT if you are still not using it. It is nice to have when you are developing a Stateless application.<br/>
</aside>
</section>
<section >
<h3>Page Model</h3>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l"> 1: </span>
<span class="l"> 2: </span>
<span class="l"> 3: </span>
<span class="l"> 4: </span>
<span class="l"> 5: </span>
<span class="l"> 6: </span>
<span class="l"> 7: </span>
<span class="l"> 8: </span>
<span class="l"> 9: </span>
<span class="l">10: </span>
<span class="l">11: </span>
<span class="l">12: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="k">module</span> <span class="i">Types</span> <span class="o">=</span>

<span class="k">type</span> <span class="i">BadPageModel</span> <span class="o">=</span> {
    <span class="i">HomeModel</span> <span class="o">:</span> <span class="i">Home</span><span class="o">.</span><span class="i">Types</span><span class="o">.</span><span class="i">Model</span>
    <span class="i">UsersModel</span> <span class="o">:</span> <span class="i">Users</span><span class="o">.</span><span class="i">Types</span><span class="o">.</span><span class="i">Model</span>
    <span class="i">ProfileModel</span> <span class="o">:</span> <span class="i">Profile</span><span class="o">.</span><span class="i">Types</span><span class="o">.</span><span class="i">Model</span>
}

<span class="k">type</span> <span class="i">GoodPageModel</span> <span class="o">=</span>
    | <span class="i">HomeModel</span> <span class="k">of</span> <span class="i">Home</span><span class="o">.</span><span class="i">Types</span><span class="o">.</span><span class="i">Model</span>
    | <span class="i">UsersModel</span> <span class="k">of</span> <span class="i">Users</span><span class="o">.</span><span class="i">Types</span><span class="o">.</span><span class="i">Model</span>
    | <span class="i">ProfileModel</span> <span class="k">of</span> <span class="i">Profile</span><span class="o">.</span><span class="i">Types</span><span class="o">.</span><span class="i">Model</span>
</code></pre></td>
</tr>
</table>
<aside class="notes">
There are two ways of writing page-model. But having page model as discriminated union type always helps. You are only loading data that is required for a page, nothing else.<br/>
Pro tip - You can group pages by Navigation. So, one less naming problem solve.<br/>
</aside>
</section>
<section >
<h3>Page - Model</h3>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
<span class="l">2: </span>
<span class="l">3: </span>
<span class="l">4: </span>
<span class="l">5: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="k">type</span> <span class="i">HomeModel</span> <span class="o">=</span> {
    <span class="i">Component1</span> <span class="o">:</span> <span class="i">Component</span><span class="o">.</span><span class="i">Types</span><span class="o">.</span><span class="i">Model</span>
    <span class="i">Component2</span> <span class="o">:</span> <span class="i">Component</span><span class="o">.</span><span class="i">Types</span><span class="o">.</span><span class="i">Model</span>
    <span class="o">..</span><span class="o">..</span>
}
</code></pre></td>
</tr>
</table>
<aside class="notes">
Divide your page into multiple components. Even if your page is having a single big entry form, divide that into a logical group. It always helps to manage small chunks of code compared to a big chunk.<br/>
Even simple entry forms are doing many things, like validation on a client-side and validation on the server side as if a username is available or not.<br/>
Features, like autocomplete will, requires a server and client-side code.<br/>
</aside>
</section>
</section>
<section >
<section >
<h3>Component Model</h3>
<aside class="notes">
We almost reached halfway, so it is time for a little break.<br/>
</aside>
</section>
<section >
<p><img src="images/break.gif" alt="" /></p>
</section>
<section >
<h3>Domain - Driven - Design</h3>
</section>
<section >
<h3>Domain Model on Client Side</h3>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l"> 1: </span>
<span class="l"> 2: </span>
<span class="l"> 3: </span>
<span class="l"> 4: </span>
<span class="l"> 5: </span>
<span class="l"> 6: </span>
<span class="l"> 7: </span>
<span class="l"> 8: </span>
<span class="l"> 9: </span>
<span class="l">10: </span>
<span class="l">11: </span>
<span class="l">12: </span>
<span class="l">13: </span>
<span class="l">14: </span>
<span class="l">15: </span>
<span class="l">16: </span>
<span class="l">17: </span>
<span class="l">18: </span>
<span class="l">19: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="k">type</span> <span class="i">Validate</span> <span class="o">=</span> {
    <span class="i">IsValid</span> <span class="o">:</span> <span onmouseout="hideTip(event, 'fs12', 15)" onmouseover="showTip(event, 'fs12', 15)" class="i">bool</span>
    <span class="i">Message</span> <span class="o">:</span> <span onmouseout="hideTip(event, 'fs9', 16)" onmouseover="showTip(event, 'fs9', 16)" class="i">string</span>
}

<span class="k">type</span> <span class="i">Person</span> <span class="o">=</span> {
    <span class="i">FirstName</span> <span class="o">:</span> <span onmouseout="hideTip(event, 'fs9', 17)" onmouseover="showTip(event, 'fs9', 17)" class="i">string</span>
    <span class="i">LastName</span> <span class="o">:</span> <span onmouseout="hideTip(event, 'fs9', 18)" onmouseover="showTip(event, 'fs9', 18)" class="i">string</span>
}

<span class="k">type</span> <span class="i">PersonError</span> <span class="o">=</span> {
    <span class="i">FirstName</span> <span class="o">:</span> <span class="i">Validate</span>
    <span class="i">LastName</span> <span class="o">:</span> <span class="i">Validate</span>
}

<span class="k">type</span> <span class="i">Model</span> <span class="o">=</span> {
    <span class="i">Person</span> <span class="o">:</span> <span class="i">Person</span>
    <span class="i">PersonError</span> <span class="o">:</span> <span class="i">PersonError</span>
}
</code></pre></td>
</tr>
</table>
<aside class="notes">
Most dumb domain model example to give an idea. Here just to show that first name should not be empty I need to update model, then Person-Error, then Validate and then message. It is three level deep. One can always use lenses to update them, but if you need to use lenses then you are doing something wrong. As model represent the view, we need to keep it as flat as possible. Use of lenses will become more and more complicated as an application grows. Instead, divide model in multiple models in MVU fashions.<br/>
</aside>
</section>
<section >
<h3>Flatten the model</h3>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l"> 1: </span>
<span class="l"> 2: </span>
<span class="l"> 3: </span>
<span class="l"> 4: </span>
<span class="l"> 5: </span>
<span class="l"> 6: </span>
<span class="l"> 7: </span>
<span class="l"> 8: </span>
<span class="l"> 9: </span>
<span class="l">10: </span>
<span class="l">11: </span>
<span class="l">12: </span>
<span class="l">13: </span>
<span class="l">14: </span>
<span class="l">15: </span>
<span class="l">16: </span>
<span class="l">17: </span>
<span class="l">18: </span>
<span class="l">19: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="k">type</span> <span class="i">Validate</span> <span class="o">=</span> {
    <span class="i">IsValid</span> <span class="o">:</span> <span onmouseout="hideTip(event, 'fs12', 19)" onmouseover="showTip(event, 'fs12', 19)" class="i">bool</span>
    <span class="i">Message</span> <span class="o">:</span> <span onmouseout="hideTip(event, 'fs9', 20)" onmouseover="showTip(event, 'fs9', 20)" class="i">string</span>
}

<span class="k">type</span> <span class="i">FirstName</span> <span class="o">=</span> {
    <span class="i">Value</span> <span class="o">:</span> <span onmouseout="hideTip(event, 'fs9', 21)" onmouseover="showTip(event, 'fs9', 21)" class="i">string</span>
    <span class="i">Valid</span> <span class="o">:</span> <span class="i">Validate</span>
}

<span class="k">type</span> <span class="i">LastName</span> <span class="o">=</span> {
    <span class="i">Value</span> <span class="o">:</span> <span onmouseout="hideTip(event, 'fs9', 22)" onmouseover="showTip(event, 'fs9', 22)" class="i">string</span>
    <span class="i">Valid</span> <span class="o">:</span> <span class="i">Validate</span>
}

<span class="k">type</span> <span class="i">Person</span> <span class="o">=</span> {
    <span class="i">FirstName</span> <span class="o">:</span> <span class="i">FirstName</span>
    <span class="i">LastName</span> <span class="o">:</span> <span class="i">LastName</span>
}
</code></pre></td>
</tr>
</table>
</section>
<section >
<h5>OR</h5>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
<span class="l">2: </span>
<span class="l">3: </span>
<span class="l">4: </span>
<span class="l">5: </span>
<span class="l">6: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="k">type</span> <span class="i">Person</span> <span class="o">=</span> {
    <span class="i">FirstName</span><span class="o">:</span> <span onmouseout="hideTip(event, 'fs9', 23)" onmouseover="showTip(event, 'fs9', 23)" class="i">string</span>
    <span class="i">FirstNameErr</span> <span class="o">:</span> <span class="i">Validate</span>
    <span class="i">LastName</span> <span class="o">:</span> <span onmouseout="hideTip(event, 'fs9', 24)" onmouseover="showTip(event, 'fs9', 24)" class="i">string</span>
    <span class="i">LastNameErr</span> <span class="o">:</span> <span class="i">Validate</span>
}
</code></pre></td>
</tr>
</table>
</section>
</section>
<section >
<section >
<h3>Let's Talk about Command</h3>
</section>
<section >
<h3>Single Responsibly Principal</h3>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l"> 1: </span>
<span class="l"> 2: </span>
<span class="l"> 3: </span>
<span class="l"> 4: </span>
<span class="l"> 5: </span>
<span class="l"> 6: </span>
<span class="l"> 7: </span>
<span class="l"> 8: </span>
<span class="l"> 9: </span>
<span class="l">10: </span>
<span class="l">11: </span>
<span class="l">12: </span>
<span class="l">13: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="k">type</span> <span class="i">Msg</span> <span class="o">=</span>
    | <span class="i">ChangeValue</span> <span class="k">of</span> <span onmouseout="hideTip(event, 'fs9', 25)" onmouseover="showTip(event, 'fs9', 25)" class="i">string</span>
    | <span class="i">Changed</span> <span class="k">of</span> <span onmouseout="hideTip(event, 'fs9', 26)" onmouseover="showTip(event, 'fs9', 26)" class="i">string</span>

<span class="k">let</span> <span class="i">init</span> () <span class="o">=</span> { <span class="i">Value</span> <span class="o">=</span> <span class="s">&quot;&quot;</span> }, <span class="i">Cmd</span><span class="o">.</span><span class="i">none</span>

<span class="k">let</span> <span class="i">update</span> (<span class="i">msg</span><span class="o">:</span><span class="i">Msg</span>) (<span class="i">model</span><span class="o">:</span><span class="i">Model</span>) <span class="o">=</span>
    <span class="k">match</span> <span class="i">msg</span> <span class="k">with</span>
    | <span class="i">ChangeValue</span> <span class="i">newValue</span> <span class="k">-&gt;</span>
        <span class="k">let</span> <span class="i">updateValue</span> <span class="o">=</span> <span class="i">newValue</span><span class="o">.</span><span class="i">ToUpper</span>()
        <span class="i">model</span>, <span class="i">Cmd</span><span class="o">.</span><span class="i">ofMsg</span> (<span class="i">Changed</span> <span class="i">updateValue</span>)
    | <span class="i">Changed</span> <span class="i">updatedValue</span> <span class="k">-&gt;</span>
        { <span class="i">Value</span> <span class="o">=</span> <span class="i">updatedValue</span>}, <span class="i">Cmd</span><span class="o">.</span><span class="i">none</span>
</code></pre></td>
</tr>
</table>
<aside class="notes">
One command should be doing one and only one thing. Here I capitalizing everything coming into the update function. Just because why not?  But you can do validation or and post data to a server.<br/>
As command processes, the data, pass it to Changed message. It is confirmation that everything is good to go.<br/>
</aside>
</section>
<section >
<h3>Another way to Look at it</h3>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l"> 1: </span>
<span class="l"> 2: </span>
<span class="l"> 3: </span>
<span class="l"> 4: </span>
<span class="l"> 5: </span>
<span class="l"> 6: </span>
<span class="l"> 7: </span>
<span class="l"> 8: </span>
<span class="l"> 9: </span>
<span class="l">10: </span>
<span class="l">11: </span>
<span class="l">12: </span>
<span class="l">13: </span>
<span class="l">14: </span>
<span class="l">15: </span>
<span class="l">16: </span>
<span class="l">17: </span>
<span class="l">18: </span>
<span class="l">19: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="k">type</span> <span class="i">Command</span> <span class="o">=</span> | <span class="i">ChangeValue</span> <span class="k">of</span> <span onmouseout="hideTip(event, 'fs9', 27)" onmouseover="showTip(event, 'fs9', 27)" class="i">string</span>
<span class="k">type</span> <span onmouseout="hideTip(event, 'fs13', 28)" onmouseover="showTip(event, 'fs13', 28)" class="i">Event</span> <span class="o">=</span> | <span class="i">Changed</span> <span class="k">of</span> <span onmouseout="hideTip(event, 'fs9', 29)" onmouseover="showTip(event, 'fs9', 29)" class="i">string</span>

<span class="k">type</span> <span class="i">Msg</span> <span class="o">=</span>
    | <span class="i">Command</span> <span class="k">of</span> <span class="i">Command</span>
    | <span onmouseout="hideTip(event, 'fs13', 30)" onmouseover="showTip(event, 'fs13', 30)" class="i">Event</span> <span class="k">of</span> <span onmouseout="hideTip(event, 'fs13', 31)" onmouseover="showTip(event, 'fs13', 31)" class="i">Event</span>

<span class="k">let</span> <span class="i">init</span> () <span class="o">=</span> { <span class="i">Value</span> <span class="o">=</span> <span class="s">&quot;&quot;</span> }, <span class="i">Cmd</span><span class="o">.</span><span class="i">none</span>

<span class="k">let</span> <span class="i">processCommand</span> (<span class="i">msg</span> <span class="o">:</span> <span class="i">Command</span>) (<span class="i">model</span> <span class="o">:</span> <span class="i">Model</span>) <span class="o">=</span>
    <span class="k">match</span> <span class="i">msg</span> <span class="k">with</span>
    | <span class="i">ChangeValue</span> <span class="i">newValue</span> <span class="k">-&gt;</span>
        <span class="k">let</span> <span class="i">updateValue</span> <span class="o">=</span> <span class="i">newValue</span><span class="o">.</span><span class="i">ToUpper</span>()
        <span class="i">model</span>, <span class="i">Cmd</span><span class="o">.</span><span class="i">ofMsg</span> (<span onmouseout="hideTip(event, 'fs13', 32)" onmouseover="showTip(event, 'fs13', 32)" class="i">Event</span> (<span class="i">Changed</span> <span class="i">updateValue</span>))

<span class="k">let</span> <span class="i">processEvent</span> (<span class="i">msg</span> <span class="o">:</span> <span onmouseout="hideTip(event, 'fs13', 33)" onmouseover="showTip(event, 'fs13', 33)" class="i">Event</span>) (<span class="i">model</span><span class="o">:</span> <span class="i">Model</span>) <span class="o">=</span>
    <span class="k">match</span> <span class="i">msg</span> <span class="k">with</span>
    | <span class="i">Changed</span> <span class="i">value</span> <span class="k">-&gt;</span>
        { <span class="i">Value</span> <span class="o">=</span> <span class="i">value</span>}, <span class="i">Cmd</span><span class="o">.</span><span class="i">none</span>
</code></pre></td>
</tr>
</table>
</section>
<section >
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
<span class="l">2: </span>
<span class="l">3: </span>
<span class="l">4: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="k">let</span> <span class="i">update</span> (<span class="i">msg</span><span class="o">:</span><span class="i">Msg</span>) (<span class="i">model</span><span class="o">:</span><span class="i">Model</span>) <span class="o">=</span>
    <span class="k">match</span> <span class="i">msg</span> <span class="k">with</span>
    | <span class="i">Command</span> <span class="i">c</span> <span class="k">-&gt;</span> <span class="i">processCommand</span> <span class="i">c</span> <span class="i">model</span>
    | <span onmouseout="hideTip(event, 'fs13', 34)" onmouseover="showTip(event, 'fs13', 34)" class="i">Event</span> <span class="i">e</span> <span class="k">-&gt;</span> <span class="i">processEvent</span> <span class="i">e</span> <span class="i">model</span>
</code></pre></td>
</tr>
</table>
</section>
<section >
<h3>Subscribe is there to Use</h3>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l"> 1: </span>
<span class="l"> 2: </span>
<span class="l"> 3: </span>
<span class="l"> 4: </span>
<span class="l"> 5: </span>
<span class="l"> 6: </span>
<span class="l"> 7: </span>
<span class="l"> 8: </span>
<span class="l"> 9: </span>
<span class="l">10: </span>
<span class="l">11: </span>
<span class="l">12: </span>
<span class="l">13: </span>
<span class="l">14: </span>
<span class="l">15: </span>
<span class="l">16: </span>
<span class="l">17: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="c">// Types</span>
<span class="k">type</span> <span class="i">Model</span> <span class="o">=</span> <span class="i">CurrentTime</span> <span class="k">of</span> <span class="i">DateTime</span>
<span class="k">type</span> <span class="i">Messages</span> <span class="o">=</span> <span class="i">Tick</span> <span class="k">of</span> <span class="i">DateTime</span>

<span class="c">// State</span>
<span class="k">let</span> <span class="i">initialState</span>() <span class="o">=</span>
    <span class="i">CurrentTime</span> <span class="i">DateTime</span><span class="o">.</span><span class="i">Now</span>, <span class="i">Cmd</span><span class="o">.</span><span class="i">none</span>

<span class="k">let</span> <span class="i">update</span> (<span class="i">Tick</span> <span class="i">next</span>) (<span class="i">CurrentTime</span> <span class="i">_time</span>) <span class="o">=</span>
    <span class="i">CurrentTime</span> <span class="i">next</span>, <span class="i">Cmd</span><span class="o">.</span><span class="i">none</span>

<span class="k">let</span> <span class="i">timer</span> <span class="i">initial</span> <span class="o">=</span>
    <span class="k">let</span> <span class="i">sub</span> <span class="i">dispatch</span> <span class="o">=</span>
        <span class="i">Browser</span><span class="o">.</span><span class="i">window</span><span class="o">.</span><span class="i">setInterval</span>(<span class="k">fun</span> _ <span class="k">-&gt;</span>
            <span class="i">dispatch</span> (<span class="i">Tick</span> <span class="i">DateTime</span><span class="o">.</span><span class="i">Now</span>)
        , <span class="n">1000</span>) <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs14', 35)" onmouseover="showTip(event, 'fs14', 35)" class="i">ignore</span>
    <span class="i">Cmd</span><span class="o">.</span><span class="i">ofSub</span> <span class="i">sub</span>
</code></pre></td>
</tr>
</table>
<aside class="notes">
This is a famous subscribe example. But it is way more powerful than this. Let's have another example where it can be used.<br/>
</aside>
</section>
<section >
<h3>Real Time or Reactive Application</h3>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l"> 1: </span>
<span class="l"> 2: </span>
<span class="l"> 3: </span>
<span class="l"> 4: </span>
<span class="l"> 5: </span>
<span class="l"> 6: </span>
<span class="l"> 7: </span>
<span class="l"> 8: </span>
<span class="l"> 9: </span>
<span class="l">10: </span>
<span class="l">11: </span>
<span class="l">12: </span>
<span class="l">13: </span>
<span class="l">14: </span>
<span class="l">15: </span>
<span class="l">16: </span>
<span class="l">17: </span>
<span class="l">18: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="k">let</span> <span class="i">subscribe</span> <span class="o">=</span>
        <span class="k">let</span> <span class="i">socketSubscription</span> <span class="i">dispatch</span> <span class="o">=</span>
            <span class="k">let</span> <span class="i">eventSourceOptions</span> <span class="o">=</span> <span class="i">createEmpty</span><span class="o">&lt;</span><span class="i">IEventSourceOptions</span><span class="o">&gt;</span>
            <span class="i">eventSourceOptions</span><span class="o">.</span><span class="i">handlers</span> <span class="o">&lt;-</span> <span class="i">createObj</span> [
                <span class="s">&quot;onMessage&quot;</span> <span class="o">==&gt;</span>
                    <span class="k">fun</span> (<span class="i">msg</span><span class="o">:</span> <span class="i">ServerEventMessage</span>) <span class="k">-&gt;</span>
                        <span onmouseout="hideTip(event, 'fs8', 36)" onmouseover="showTip(event, 'fs8', 36)" class="i">printfn</span> <span class="s">&quot;onMessage %A&quot;</span> <span class="i">msg</span><span class="o">.</span><span class="i">json</span>
                <span class="s">&quot;chat&quot;</span> <span class="o">==&gt;</span>
                    <span class="k">fun</span> (<span class="i">msg</span> <span class="o">:</span> <span class="i">OutputMessages</span>) <span class="k">-&gt;</span>
                                <span class="i">msg</span> <span class="o">|&gt;</span> (<span class="i">SSESuccessMessages</span> <span class="o">&gt;</span><span class="o">&gt;</span> <span class="i">dispatch</span>)
            ]

            <span class="k">let</span> <span class="i">channels</span> <span class="o">=</span> [|<span class="s">&quot;home&quot;</span>; <span class="s">&quot;&quot;</span>|]
            <span class="i">SSClient</span><span class="o">.</span><span class="i">ServerEventsClient</span><span class="o">.</span><span class="i">Create</span>(<span class="i">baseUrl</span>
            , <span class="k">new</span> <span onmouseout="hideTip(event, 'fs15', 37)" onmouseover="showTip(event, 'fs15', 37)" class="i">List</span><span class="o">&lt;</span><span onmouseout="hideTip(event, 'fs9', 38)" onmouseover="showTip(event, 'fs9', 38)" class="i">string</span><span class="o">&gt;</span>(<span class="i">channels</span>)
            , <span class="i">eventSourceOptions</span>
            )<span class="o">.</span><span class="i">start</span>() <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs14', 39)" onmouseover="showTip(event, 'fs14', 39)" class="i">ignore</span>
        <span class="i">Cmd</span><span class="o">.</span><span class="i">ofSub</span> <span class="i">socketSubscription</span>
</code></pre></td>
</tr>
</table>
<aside class="notes">
Be it Real-time or reactive application; Subscribe is pretty useful. Here you can subscribe to events those are coming from the server. Events will update the UI eventually.<br/>
</aside>
</section>
</section>
<section >
<section >
<h3>Let's Talk about View</h3>
</section>
<section data-background-image="images/catgroup.jpg">
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
<span class="l">2: </span>
<span class="l">3: </span>
<span class="l">4: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="k">let</span> <span class="i">root</span> <span class="i">model</span> <span class="i">dispatch</span> <span class="o">=</span>
    <span class="i">Container</span><span class="o">.</span><span class="i">container</span>[ <span class="i">Container</span><span class="o">.</span><span class="i">IsFluid</span> ][
        <span class="i">documentTable</span> <span class="i">model</span> <span class="i">dispatch</span>
    ]
</code></pre></td>
</tr>
</table>
<aside class="notes">
A view should be Small & cute. It should be a representation of the whole page. So, if someone is reading root function, s/he will get the idea.<br/>
</aside>
</section>
<section >
<h3>Use CSS Wrappers like Fulma</h3>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l"> 1: </span>
<span class="l"> 2: </span>
<span class="l"> 3: </span>
<span class="l"> 4: </span>
<span class="l"> 5: </span>
<span class="l"> 6: </span>
<span class="l"> 7: </span>
<span class="l"> 8: </span>
<span class="l"> 9: </span>
<span class="l">10: </span>
<span class="l">11: </span>
<span class="l">12: </span>
<span class="l">13: </span>
<span class="l">14: </span>
<span class="l">15: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="i">form</span> [ ]
        [ <span class="c">// Email field</span>
            <span class="i">Field</span><span class="o">.</span><span class="i">div</span> [ ]
                [ <span class="i">Label</span><span class="o">.</span><span class="i">label</span> [ ]
                    [ <span class="i">str</span> <span class="s">&quot;Email&quot;</span> ]
                  <span onmouseout="hideTip(event, 'fs16', 40)" onmouseover="showTip(event, 'fs16', 40)" class="i">Control</span><span class="o">.</span><span class="i">div</span> [ <span onmouseout="hideTip(event, 'fs16', 41)" onmouseover="showTip(event, 'fs16', 41)" class="i">Control</span><span class="o">.</span><span class="i">HasIconLeft</span>
                                <span onmouseout="hideTip(event, 'fs16', 42)" onmouseover="showTip(event, 'fs16', 42)" class="i">Control</span><span class="o">.</span><span class="i">HasIconRight</span> ]
                    [ <span class="i">Input</span><span class="o">.</span><span class="i">email</span> [ <span class="i">Input</span><span class="o">.</span><span class="i">Color</span> <span class="i">IsDanger</span>
                                    <span class="i">Input</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs17', 43)" onmouseover="showTip(event, 'fs17', 43)" class="i">DefaultValue</span> <span class="s">&quot;hello@&quot;</span> ]
                      <span class="i">Icon</span><span class="o">.</span><span class="i">faIcon</span> [ <span class="i">Icon</span><span class="o">.</span><span class="i">Size</span> <span class="i">IsSmall</span>; <span class="i">Icon</span><span class="o">.</span><span class="i">IsLeft</span> ]
                        [ <span class="i">Fa</span><span class="o">.</span><span class="i">icon</span> <span class="i">Fa</span><span class="o">.</span><span class="i">I</span><span class="o">.</span><span class="i">Envelope</span> ]
                      <span class="i">Icon</span><span class="o">.</span><span class="i">faIcon</span> [ <span class="i">Icon</span><span class="o">.</span><span class="i">Size</span> <span class="i">IsSmall</span>; <span class="i">Icon</span><span class="o">.</span><span class="i">IsRight</span> ]
                        [ <span class="i">Fa</span><span class="o">.</span><span class="i">icon</span> <span class="i">Fa</span><span class="o">.</span><span class="i">I</span><span class="o">.</span><span class="i">Warning</span> ] ]
                  <span class="i">Help</span><span class="o">.</span><span class="i">help</span> [ <span class="i">Help</span><span class="o">.</span><span class="i">Color</span> <span class="i">IsDanger</span> ]
                    [ <span class="i">str</span> <span class="s">&quot;This email is invalid&quot;</span> ] ] ]
</code></pre></td>
</tr>
</table>
<aside class="notes">
It will make so much easier to write UIs with wrappers. Please use them.<br/>
</aside>
</section>
</section>
<section >
<section >
<h3>Why I choose Elmish?</h3>
<ul>
<li>One Language of for Server, Client (Web &amp; Mobile), Data Science / ML &amp; Data Processing etc.</li>
<li>Possible to leverage JavaScript libraries (Stateless one)</li>
<li>Possible to leverage React libraries (Stateless one)</li>
<li>Because of all these, I can leverage my experience, I acquired throughout all these years.</li>
</ul>
</section>
<section >
<h3>React Leaflet</h3>
<p><img src="images/react-leaflet-code.gif" alt="" /></p>
<aside class="notes">
Here is React Leaflet example in F#. No need to create graph library from bottom up.<br/>
</aside>
</section>
<section >
<p><img src="images/react-leaflet-demo-map.gif" alt="" /></p>
</section>
</section>
<section >
<section >
<h3>Awesome Tool Chain</h3>
</section>
<section >
<h3>Html to Elmish</h3>
<p><img src="images/htmltoelmish.gif" alt="" /></p>
<aside class="notes">
Convert your html to elmish code.<br/>
</aside>
</section>
<section >
<h3>Ts 2 Fable</h3>
<p><img src="images/ts2fable.gif" alt="" /></p>
<aside class="notes">
And this is my favorite one.<br/>
Convert your typescript definitions to F#<br/>
</aside>
</section>
</section>
<section >
<section data-background-image="images/catthankyou.gif">
</section>
<section >
<ul>
<li>Awesome Fable - <a href="https://github.com/kunjee17/awesome-fable"><a href="https://github.com/kunjee17/awesome-fable">https://github.com/kunjee17/awesome-fable</a></a></li>
<li>Safe Stack - <a href="https://safe-stack.github.io/"><a href="https://safe-stack.github.io/">https://safe-stack.github.io/</a></a></li>
<li>WTF# Elmish - <a href="https://wtfsharp.net/wtf-is-elmish"><a href="https://wtfsharp.net/wtf-is-elmish">https://wtfsharp.net/wtf-is-elmish</a></a></li>
<li>Fulma - <a href="https://mangelmaxime.github.io/Fulma/"><a href="https://mangelmaxime.github.io/Fulma/">https://mangelmaxime.github.io/Fulma/</a></a></li>
<li>Balero - <a href="https://github.com/intellifactory/bolero"><a href="https://github.com/intellifactory/bolero">https://github.com/intellifactory/bolero</a></a></li>
<li>Fable - <a href="https://fable.io/"><a href="https://fable.io/">https://fable.io/</a></a></li>
</ul>
<aside class="notes">
Here is an awesome fable link where I am maintaining all awesome stuff happening in Fable world.<br/>
Safe-Stack is just like MEAN-Stack but everything in F#. Even if you are not interested in F# then also do check it out. It is featured in Thought works Tech Radar recently.<br/>
And I personally feel that every Functional Programming language should have similar kind of stack.<br/>
Then there is What the F# podcast, Where I and Alfonso Garcia Caro was talking about Elmish.<br/>
There is also a link for fulma<br/>
And the obvious fable link. Do try out Fable REPL, it is compiling whole F# code in the browser itself. So, your code will totally work in offline mode.<br/>
</aside>
</section>
<section >
<ul>
<li>Fuzzy Cloud - <a href="https://fuzzycloud.in/"><a href="https://fuzzycloud.in/">https://fuzzycloud.in/</a></a></li>
<li>Fable Compiler @ Twitter - <a href="https://twitter.com/FableCompiler">@FableCompiler</a></li>
<li>Me (Kunjan Dalal) @ Twitter - <a href="https://twitter.com/kunjee">@kunjee</a></li>
</ul>
<aside class="notes">
Fuzzy Cloud is consulting things I started recently. I am available for training and consulting for everything related but not limited to Functional Programming.<br/>
I am carrying my visiting card with me if anyone likes to have.<br/>
If you have enjoyed this talk please tag Fable Compiler and me (I am totally optional) with your good comments.<br/>
Please provide your criticism and inputs to me, I will surely try to improve for next talk.<br/>
Any questions? Else I am available here only for today at least. Do stay in touch.<br/>
</section>
</section>


        </div>
    </div>
    <script src="lib/js/head.min.js"></script>
    <script src="js/reveal.js"></script>
    <script>
        // Add the nohighlight class and data-noescape attribute to code elements that have already been formatted by FSharp.Formatting
        $('pre.highlighted code').addClass('nohighlight').attr('data-noescape', '');

        // Full list of configuration options available here:
        // https://github.com/hakimel/reveal.js#configuration
        Reveal.initialize({
            controls: true,
            progress: true,
            history: true,
            center: true,

            transition: 'none', // default/cube/page/concave/zoom/linear/fade/none

            // Parallax scrolling
            // parallaxBackgroundImage: 'https://s3.amazonaws.com/hakim-static/reveal-js/reveal-parallax-1.jpg',
            // parallaxBackgroundSize: '2100px 900px',

            // Optional libraries used to extend on reveal.js
            dependencies: [
                { src: 'lib/js/classList.js', condition: function () { return !document.body.classList; } },
                { src: 'plugin/markdown/marked.js', condition: function () { return !!document.querySelector('[data-markdown]'); } },
                { src: 'plugin/markdown/markdown.js', condition: function () { return !!document.querySelector('[data-markdown]'); } },
                { src: 'plugin/highlight/highlight.js', async: true, callback: function () { hljs.initHighlightingOnLoad(); } },
                { src: 'plugin/zoom-js/zoom.js', async: true, condition: function () { return !!document.body.classList; } },
                { src: 'plugin/notes/notes.js', async: true, condition: function () { return !!document.body.classList; } }
            ]
        });

    </script>
</body>
</html>

